language: r
cache: packages
warnings_are_errors: false

r:
  - release

r_binary_packages:
  - devtools
  - dplyr
  - purrr
  - foreach
  - doParallel
  - tokenizers
  - stringr
  - readr
  - testthat
  - rlang
  - cli
  - fansi
  - pillar
  - pkgconfig
  - assertthat
  - glue
  - utf8
  - vctrs
  - ellipsis
  - iterators
  - desc
  - pkgbuild
  - rprojroot
  - rstudioapi
  - callr
  - prettyunits
  - backports
  - processx
  - ps
  - Rcpp
  - tibble
  - tidyselect
  - BH
  - plogr
  - stringi
  - SnowballC
  - hms
  - clipr
  - evaluate
  - pkgload
  - praise

# do not build vignettes...takes too long and times out on travis
r_build_args: --no-build-vignettes --no-manual
r_check_args: --no-build-vignettes --no-manual --timings

# for codecov
r_packages:
  - covr

# only report coverage after build is successful
after_success:
  - Rscript -e 'covr::codecov()'

notifications:
  email:
    on_success: change
    on_failure: change